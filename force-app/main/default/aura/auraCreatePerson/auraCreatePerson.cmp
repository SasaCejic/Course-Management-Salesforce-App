<aura:component controller = "PersonController"  implements = "flexipage:availableForAllPageTypes, force:hasRecordId, force:appHostable" access = "global">

<aura:handler name="init" value="{!this}" action="{!c.init}"/>

<aura:attribute name = "showRecordTypePanel" type = "Boolean" default = "true"/>

<aura:attribute name="options" type="List" default = "[{'label' : 'Tutor', 'value' : 'Tutor'},{'label' : 'Student', 'value' : 'Student'}]"/>
<aura:attribute name = "selectedRecordTypeName" type = "String" default = "Tutor"/>
<aura:attribute name="selectedRecordTypeId" type="String"/>

<lightning:navigation aura:id="navService"/>
  
<aura:if isTrue = "{!v.showRecordTypePanel}">
<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
    <div class="slds-modal__container">
     <!-- modal header start -->
       <header class="slds-modal__header">
          <lightning:button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick="{!c.closeModal}">
             <lightning:icon icon-name="utility:close"
                alternative-text="close"
                variant="inverse"
                size="small" ></lightning:icon>
             <span class="slds-assistive-text">Close</span>
          </lightning:button>
          <h2 class="slds-text-heading_medium slds-hyphenate">Select a Record Type</h2>
       </header>
   
       <!-- modal body start -->
       <div class="slds-modal__content slds-p-around_medium">

        <lightning:radioGroup name="radioGroup"
                          label="Record Type"
                          options="{! v.options }"
                          value="{! v.selectedRecordTypeName }"
                          type="radio"/>
             
        <div class="slds-m-around_medium">
            <lightning:button label="Next" title="Next" class="slds-float_right" 
                onclick = "{!c.hideRecordTypePanel}">
            </lightning:button>
        </div>
        </div>
        
    
    </div>
 </section>

<aura:set attribute="else">
<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
    <div class="slds-modal__container">
     <!-- modal header start -->
       <header class="slds-modal__header">
          <lightning:button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick="{!c.closeModal}">
             <lightning:icon icon-name="utility:close"
                alternative-text="close"
                variant="inverse"
                size="small" ></lightning:icon>
             <span class="slds-assistive-text">Close</span>
          </lightning:button>
          <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Create New Person</h2>
       </header>
   
       <!-- modal body start -->
       <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">

            <lightning:recordForm
                aura:id = "myRecordCreateForm"
                objectApiName="Person__c"
                recordTypeId = "{!v.selectedRecordTypeId}"
                layoutType = "Full"
                columns="2"
                oncancel = "{!c.closeModal}"
                onerror = "{!c.handleError}"
                onsuccess="{!c.handleSuccess}"
            >
            </lightning:recordForm>
        
        </div>
    
    </div>
 </section>
 </aura:set>
 </aura:if>
 <div class="slds-backdrop slds-backdrop_open"></div>

</aura:component>	
